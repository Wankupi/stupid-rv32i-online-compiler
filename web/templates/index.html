<!DOCTYPE html>
<haed>
  <title>在线编译</title>
</haed>

<body>
  <h1>CPU测试点在线编译</h1>
  <div>您可以借此生成自定义测试点</div>

  <form
    action="{{ rooturi }}/submit"
    method="post"
    enctype="multipart/form-data"
  >
    <fieldset>
      <legend>上传文件</legend>
      <input type="file" name="srcfile" accept=".S,.c,.cpp" required />
    </fieldset>

    <br />

    <fieldset>
      <legend>选择架构 (march)</legend>
      {% for v in const.ACCEPTED_MARCH %}
      <label>
        <input type="radio" name="march" value="{{ v }}" required {{ "checked"
        if v == "rv32ic" else "" }} /> {{ v }}
      </label>
      {% endfor %}
    </fieldset>

    <br />

    <fieldset>
      <legend>选择目标平台 (target)</legend>
      <label>
        <input type="radio" name="target" value="fpga" required />
        FPGA
      </label>

      <label>
        <input type="radio" name="target" value="sim" required checked />
        SIM
      </label>
    </fieldset>

    <br />

    <fieldset>
      <legend>选择优化等级 (O)</legend>
      {% for v in const.ACCEPTED_OPT_LEVELS %}
      <label>
        <input type="radio" name="opt_level" value="{{ v }}" required {{
        "checked" if v == "2" else "" }} /> {{ v }}
      </label>
      {% endfor %}
    </fieldset>

    <br />

    <button type="submit">提交</button>
  </form>

  <h2>参考</h2>
  <ul>
    <li>本项目的仓库：<a href="https://github.com/Wankupi/stupid-rv32i-online-compiler" target="_blank">https://github.com/Wankupi/stupid-rv32i-online-compiler</a></li>
    <li>编译时环境中会提供 io.h，你可以直接 include</li>
    <li>编译使用的 io.h memory.ld rom.s 与 CPU 作业仓库保持一直。若 CPU 仓库有更新，而本仓库未更新，请至 github 提 issue 或 pr。</li>
    <li>建议代码先在本地 x86_64 环境下测试，然后再来本网站编译到 riscv。</li>
    <li>接上条，为方便本地测试，以下是 @DarkSharpness 编写的适用于本地使用的 <a href="static/io.h" download>io.h</a></li>
  </ul>
</body>
